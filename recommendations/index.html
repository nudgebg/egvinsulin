
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../data_sets/REPLACE_BG/">
      
      
        <link rel="next" href="../reference/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.36">
    
    
      
        <title>Better Datasets - Babelbetes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.06209087.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#recommendations-for-better-datasets" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Babelbetes" class="md-header__button md-logo" aria-label="Babelbetes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Babelbetes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Better Datasets
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Babelbetes" class="md-nav__button md-logo" aria-label="Babelbetes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Babelbetes
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Babelbetes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Supported Datasets
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Supported Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_sets/IOBP2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IOBP2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_sets/DCLP3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DCLP3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_sets/DCLP5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DCLP5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_sets/PEDAP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PEDAP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_sets/FLAIR/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FLAIR
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_sets/LOOP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LOOP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_sets/T1DEXI/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    T1DExi
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_sets/T1DEXIP/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    T1DEXIP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../data_sets/REPLACE_BG/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Replace BG
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Better Datasets
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Better Datasets
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recommendations-for-better-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      Recommendations for Better Datasets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recommendations for Better Datasets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consistency-in-units" class="md-nav__link">
    <span class="md-ellipsis">
      Consistency in units
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-structure-and-glossary" class="md-nav__link">
    <span class="md-ellipsis">
      File Structure and Glossary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datetimes" class="md-nav__link">
    <span class="md-ellipsis">
      Datetimes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cgm" class="md-nav__link">
    <span class="md-ellipsis">
      CGM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basal" class="md-nav__link">
    <span class="md-ellipsis">
      Basal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boluses" class="md-nav__link">
    <span class="md-ellipsis">
      Boluses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-sizes" class="md-nav__link">
    <span class="md-ellipsis">
      File Sizes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gaps" class="md-nav__link">
    <span class="md-ellipsis">
      Gaps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other" class="md-nav__link">
    <span class="md-ellipsis">
      Other
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validation-measures" class="md-nav__link">
    <span class="md-ellipsis">
      Validation measures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#duplicates" class="md-nav__link">
    <span class="md-ellipsis">
      Duplicates
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Toolbox Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Toolbox Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../checklist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Study Checklist
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../best-practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Pracitces
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual Environments
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribute
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../snippets/license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recommendations-for-better-datasets" class="md-nav__link">
    <span class="md-ellipsis">
      Recommendations for Better Datasets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Recommendations for Better Datasets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#consistency-in-units" class="md-nav__link">
    <span class="md-ellipsis">
      Consistency in units
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-structure-and-glossary" class="md-nav__link">
    <span class="md-ellipsis">
      File Structure and Glossary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datetimes" class="md-nav__link">
    <span class="md-ellipsis">
      Datetimes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cgm" class="md-nav__link">
    <span class="md-ellipsis">
      CGM
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#basal" class="md-nav__link">
    <span class="md-ellipsis">
      Basal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boluses" class="md-nav__link">
    <span class="md-ellipsis">
      Boluses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-sizes" class="md-nav__link">
    <span class="md-ellipsis">
      File Sizes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gaps" class="md-nav__link">
    <span class="md-ellipsis">
      Gaps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other" class="md-nav__link">
    <span class="md-ellipsis">
      Other
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validation-measures" class="md-nav__link">
    <span class="md-ellipsis">
      Validation measures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#duplicates" class="md-nav__link">
    <span class="md-ellipsis">
      Duplicates
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Better Datasets</h1>

<h2 id="recommendations-for-better-datasets">Recommendations for Better Datasets</h2>
<p>We have spend hundreds of hours processing and reverse-engineering clinical diabetes study datasets. In this process we often came accross similar challenges and unknowns. Often, we were not able to resolve these and had to make small or large assumptions. This page summarizes these challenges and provides suggestions for improvements. This should act as a guide for other researchers when processing datasets as well as investigators to improve the quality and utility of their datasets. </p>
<h3 id="consistency-in-units">Consistency in units</h3>
<p>Avoid using different units in the same column: For example, Replace BG bolus durations are given in ms or minutes depending on the data source not obvious and resides in a different table.  Sometimes glucose values are expressed in both/either mg/dl and mmol/dl, requiring assumptions to be made.</p>
<h3 id="file-structure-and-glossary">File Structure and Glossary</h3>
<ul>
<li>Glossary filenames and column names often don't align</li>
<li>One file per data type. DCLP3 is by far the worst: 5 CGM files from different sources with poor descriptions [[#DCLP3 vs. 5 Datafiles]]</li>
<li>Split files by patient or use parquet structures</li>
</ul>
<h3 id="datetimes">Datetimes</h3>
<ul>
<li>Ideally: local datetime! <ul>
<li>Alternatively: UTC + offset <ul>
<li>DST (Geographical Location)</li>
<li>Travels</li>
</ul>
</li>
</ul>
</li>
<li>Datetime device resets: should be integrated and duplicate events removed</li>
</ul>
<h3 id="cgm">CGM</h3>
<ul>
<li>Magic CGM Numbers (i.e. 38 and other values outside of the measurement range 40-400 mg/dl)</li>
<li>Consistent handling of below/above range readings</li>
<li>Below/Above Ranges<ul>
<li>Some data is clamped (Replace BG limited to 39/401 mg/dl), others are encoded as below/above range)</li>
</ul>
</li>
<li>Report Calibrations (separately)</li>
<li>Reduce the amount of files or describe the differences precisely. Which one should be used? Often we saw multiple files (e.g. Dexcom raw CGM, Clarity CGM, CGM from Pump,...) without documentation about which one was and should used for analysis or their differences. </li>
</ul>
<h3 id="basal">Basal</h3>
<ul>
<li>Suspends should already be integrated</li>
<li>Temporary Basals should already be integrated</li>
</ul>
<h3 id="boluses">Boluses</h3>
<ul>
<li>Provided clarity on extended boluses timestamps </li>
<li>Record the delivered portion, not the requested portion</li>
</ul>
<h3 id="file-sizes">File Sizes</h3>
<ul>
<li>Datasets split by patient if large</li>
<li>Only one unit! (mmol/dL vs. mg/dl no extra column for the unit)</li>
</ul>
<h3 id="gaps">Gaps</h3>
<ul>
<li>Often data gaps result in large basal durations which seems to be caused by retrospective processing (sometimes &gt;250 days (Replace BG). This makes it difficult to determine if the basal rate is active for more than a day, or if data is missing. </li>
<li>Mention of missing data</li>
<li>Remove data before study started (orphan pump events)</li>
<li>If there is no data is this because no boluses occurred or because they are not reported? (Watchdog)</li>
</ul>
<h3 id="other">Other</h3>
<ul>
<li>Remove duplicates</li>
</ul>
<h3 id="validation-measures">Validation measures</h3>
<ul>
<li>Report of TDD for verification split by basal and bolus</li>
<li>Report of CGM TIR, mean, std</li>
</ul>
<h3 id="duplicates">Duplicates</h3>
<p>Many datasets contain duplicates and NaN Values
It is unclear often how these should be interpreted. Complete duplicates might be dropped but often the dose is different. Or the same value is reported twice within close temporal distance (e.g. T1DEXI basal injections). Then, it is unclear wether these are double injections or duplicate imports. Also, priming doses are not marked as such. Often, MDI doses seem to be missing.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>